{"ast":null,"code":"var _jsxFileName = \"/home/jorge-n/Documentos/workspace-react/saco_de_vacilos/frontend/src/pages/Register/index.tsx\";\nvar __jsx = React.createElement;\nimport { FormControl, FormLabel, Input } from \"@chakra-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport { Form, Formik } from \"formik\";\nimport Toast from \"./../../components/Toast\";\nimport HomeLayout from \"../../components/HomeLayout\"; // import logo from \"./../assets/image/logo.png\";\n\nconst Register = ({}) => {\n  const {\n    0: username,\n    1: setUsername\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  useEffect(() => {\n    document.title = \"Login\";\n  }, []);\n\n  async function handleSubmit(event) {\n    event.preventDefault(); //Verificar se todos o campos estão preenchidos antes da primeira requisição.\n\n    if (!username || !password) {\n      Toast(\"Que vacilo! Você não preencheu todos os campos.\", \"warning\");\n      return false;\n    } //Bloquear o botão de login para evitar requisições desnecessárias.\n\n\n    let btn_login = document.getElementById(\"btn_login\");\n    btn_login.setAttribute(\"disabled\", \"disabled\");\n    btn_login.classList.add(\"waiting\"); //Tentar realizar a requisição.\n\n    try {\n      const response = await api.post(\"/users/login\", {\n        username,\n        password\n      });\n      const {\n        data\n      } = response;\n      console.log(data);\n      data.login_date = new Date();\n      dispatch(UserActions.login(JSON.stringify(data))); //TODO, método de redirecionamento vannila não fica legal :(\n\n      window.location = \"/Dashboard\";\n    } catch (error) {\n      Toast(\"Vacilou na senha ou usuario, verifique se suas credenciais estão corretas..\", \"warning\");\n      btn_login.classList.remove(\"waiting\");\n      btn_login.removeAttribute(\"disabled\");\n    }\n  }\n\n  return __jsx(HomeLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, __jsx(Formik, {\n    initialValues: {\n      username: \"\",\n      password: \"\",\n      email: \"\"\n    },\n    onSubmit: values => {\n      console.log(values);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, (values, handleChange) => __jsx(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, __jsx(FormControl, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, __jsx(FormLabel, {\n    htmlFor: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, \"Nome de Usu\\xE1rio\"), __jsx(Input, {\n    value: values.username,\n    onChange: handleChange,\n    id: \"username\",\n    placeholder: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  })))));\n};\n\nexport default Register;","map":{"version":3,"sources":["/home/jorge-n/Documentos/workspace-react/saco_de_vacilos/frontend/src/pages/Register/index.tsx"],"names":["FormControl","FormLabel","Input","React","useEffect","useState","Form","Formik","Toast","HomeLayout","Register","username","setUsername","password","setPassword","document","title","handleSubmit","event","preventDefault","btn_login","getElementById","setAttribute","classList","add","response","api","post","data","console","log","login_date","Date","dispatch","UserActions","login","JSON","stringify","window","location","error","remove","removeAttribute","email","values","handleChange"],"mappings":"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","sourcesContent":["import {\n  Button,\n  FormControl,\n  FormErrorMessage,\n  FormLabel,\n  Input,\n} from \"@chakra-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport { Form, Formik } from \"formik\";\n\nimport Toast from \"./../../components/Toast\";\nimport HomeLayout from \"../../components/HomeLayout\";\n\n// import logo from \"./../assets/image/logo.png\";\n\ninterface RegisterProps {}\n\nconst Register: React.FC<RegisterProps> = ({}) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  useEffect(() => {\n    document.title = \"Login\";\n  }, []);\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    //Verificar se todos o campos estão preenchidos antes da primeira requisição.\n    if (!username || !password) {\n      Toast(\"Que vacilo! Você não preencheu todos os campos.\", \"warning\");\n      return false;\n    }\n\n    //Bloquear o botão de login para evitar requisições desnecessárias.\n    let btn_login = document.getElementById(\"btn_login\");\n    btn_login.setAttribute(\"disabled\", \"disabled\");\n    btn_login.classList.add(\"waiting\");\n\n    //Tentar realizar a requisição.\n    try {\n      const response = await api.post(\"/users/login\", { username, password });\n\n      const { data } = response;\n\n      console.log(data);\n      data.login_date = new Date();\n\n      dispatch(UserActions.login(JSON.stringify(data)));\n\n      //TODO, método de redirecionamento vannila não fica legal :(\n      window.location = \"/Dashboard\";\n    } catch (error) {\n      Toast(\n        \"Vacilou na senha ou usuario, verifique se suas credenciais estão corretas..\",\n        \"warning\"\n      );\n\n      btn_login.classList.remove(\"waiting\");\n      btn_login.removeAttribute(\"disabled\");\n    }\n  }\n\n  return (\n    <HomeLayout>\n      <Formik\n        initialValues={{ username: \"\", password: \"\", email: \"\" }}\n        onSubmit={(values) => {\n          console.log(values);\n        }}\n      >\n        {(values, handleChange) => (\n          <Form>\n            <FormControl>\n              <FormLabel htmlFor=\"username\">Nome de Usuário</FormLabel>\n              <Input\n                value={values.username}\n                onChange={handleChange}\n                id=\"username\"\n                placeholder=\"username\"\n              />\n              {/* <FormErrorMessage>{form.errors.name}</FormErrorMessage> */}\n            </FormControl>\n          </Form>\n        )}\n      </Formik>\n    </HomeLayout>\n  );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}